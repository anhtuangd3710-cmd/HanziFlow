(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{8695:(e,t,s)=>{"use strict";s.d(t,{D:()=>n});var r=s(95155);s(12115);var a=s(34267);let n=e=>(0,r.jsx)(a.z,{...e,children:(0,r.jsx)("polyline",{points:"6 9 12 15 18 9"})})},17237:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=()=>(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"})},20063:(e,t,s)=>{"use strict";var r=s(47260);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},20760:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(95155),a=s(12115),n=s(17237),i=s(20063),l=s(43853),c=s(37621),o=s(8695);let d=e=>{let{level:t}=e,s=(0,a.useMemo)(()=>0===t?"bg-gray-300":t<=2?"bg-yellow-400":t<=5?"bg-blue-400":"bg-green-500",[t]);return(0,r.jsx)("div",{className:"flex items-center gap-1",title:"Level ".concat(t),children:Array.from({length:8}).map((e,a)=>(0,r.jsx)("div",{className:"h-2 w-4 rounded-sm ".concat(a<t?s:"bg-gray-200")},a))})},x=()=>{let{setId:e}=(0,i.useParams)(),t=(0,i.useRouter)(),s=(0,a.useContext)(l.B),[x,u]=(0,a.useState)(void 0),[m,h]=(0,a.useState)(!0),[g,v]=(0,a.useState)({key:"nextReviewDate",direction:"ascending"});if(!s)return(0,r.jsx)("div",{children:"Loading..."});let{state:p}=s,f=(0,a.useMemo)(()=>p.vocabSets.find(t=>t._id===e),[p.vocabSets,e]);(0,a.useEffect)(()=>{if(f){u(f),h(!1);return}(async()=>{if(!e){u(null),h(!1);return}h(!0);try{let t=await (0,c.Re)(e);u(t)}catch(e){console.error("Failed to fetch progress set:",e),u(null)}finally{h(!1)}})()},[e,f]);let j=(0,a.useMemo)(()=>{if(!(null==x?void 0:x.items))return[];let e=[...x.items];return e.sort((e,t)=>{let s=0;switch(g.key){case"srsLevel":s=(e.srsLevel||0)-(t.srsLevel||0);break;case"nextReviewDate":s=(e.nextReviewDate?new Date(e.nextReviewDate).getTime():1/0)-(t.nextReviewDate?new Date(t.nextReviewDate).getTime():1/0);break;case"hanzi":s=e.hanzi.localeCompare(t.hanzi,"zh-Hans-CN")}return"ascending"===g.direction?s:-s}),e},[null==x?void 0:x.items,g]),y=e=>{let t="ascending";g.key===e&&"ascending"===g.direction&&(t="descending"),v({key:e,direction:t})},w=e=>{let{direction:t}=e;return(0,r.jsx)(o.D,{size:16,className:"ml-1 transition-transform text-gray-500 ".concat("ascending"===t?"transform rotate-180":"")})};return m?(0,r.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading progress..."})]}):x?(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:x.title}),(0,r.jsx)("p",{className:"text-gray-500",children:"Individual Word Progress"})]}),(0,r.jsx)("button",{onClick:()=>t.push("/"),className:"py-2 px-4 bg-gray-200 text-gray-800 font-bold rounded-lg hover:bg-gray-300",children:"â† Back to Dashboard"})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,r.jsxs)("button",{onClick:()=>y("hanzi"),className:"flex items-center focus:outline-none",children:["Word","hanzi"===g.key&&(0,r.jsx)(w,{direction:g.direction})]})}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,r.jsxs)("button",{onClick:()=>y("srsLevel"),className:"flex items-center focus:outline-none",children:["SRS Level","srsLevel"===g.key&&(0,r.jsx)(w,{direction:g.direction})]})}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,r.jsxs)("button",{onClick:()=>y("nextReviewDate"),className:"flex items-center focus:outline-none",children:["Next Review","nextReviewDate"===g.key&&(0,r.jsx)(w,{direction:g.direction})]})})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length>0?j.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:e.hanzi}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.pinyin}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.meaning})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"font-bold text-gray-800 text-lg w-4",children:e.srsLevel||0}),(0,r.jsx)(d,{level:e.srsLevel||0})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700",children:(e=>{if(!e)return"Not yet reviewed";let t=new Date(e),s=new Date;s.setHours(0,0,0,0),t.setHours(0,0,0,0);let r=Math.ceil((t.getTime()-s.getTime())/864e5);return r<0?"Due for review":0===r?"Today":1===r?"Tomorrow":r<=7?"In ".concat(r," days"):t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})(e.nextReviewDate)})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"text-center py-10 text-gray-500",children:"This set has no words yet. Add some to track your progress!"})})})]})})})]}):(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Set not found."}),(0,r.jsx)("button",{onClick:()=>t.push("/"),className:"mt-4 text-blue-500 underline",children:"Back to Dashboard"})]})};function u(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading page..."})]}),children:(0,r.jsx)(x,{})})}},34267:(e,t,s)=>{"use strict";s.d(t,{z:()=>a});var r=s(95155);s(12115);let a=e=>{let{children:t,size:s=24,className:a="",...n}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,...n,children:t})}},35866:(e,t,s)=>{Promise.resolve().then(s.bind(s,20760))}},e=>{e.O(0,[798,853,441,255,358],()=>e(e.s=35866)),_N_E=e.O()}]);