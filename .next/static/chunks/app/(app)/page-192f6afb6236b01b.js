(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{3903:(e,s,t)=>{"use strict";t.d(s,{R:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsxs)(l.z,{...e,children:[(0,a.jsx)("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),(0,a.jsx)("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]})},8695:(e,s,t)=>{"use strict";t.d(s,{D:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsx)(l.z,{...e,children:(0,a.jsx)("polyline",{points:"6 9 12 15 18 9"})})},14574:(e,s,t)=>{"use strict";t.d(s,{u:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsxs)(l.z,{...e,children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},17237:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(95155);t(12115);let l=()=>(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"})},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},29796:(e,s,t)=>{"use strict";t.d(s,{u:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsxs)(l.z,{...e,children:[(0,a.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,a.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})},32383:()=>{},34267:(e,s,t)=>{"use strict";t.d(s,{z:()=>l});var a=t(95155);t(12115);let l=e=>{let{children:s,size:t=24,className:l="",...n}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:l,...n,children:s})}},43973:(e,s,t)=>{"use strict";t.d(s,{V:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsxs)(l.z,{...e,children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),(0,a.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})},44623:(e,s,t)=>{"use strict";t.d(s,{h:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsx)(l.z,{...e,children:(0,a.jsx)("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})})},44859:(e,s,t)=>{"use strict";t.d(s,{r:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsxs)(l.z,{...e,children:[(0,a.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),(0,a.jsx)("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),(0,a.jsx)("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]})},54724:(e,s,t)=>{Promise.resolve().then(t.bind(t,69686))},59364:(e,s,t)=>{"use strict";t.d(s,{s:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsxs)(l.z,{...e,children:[(0,a.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,a.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,a.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})},69686:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var a=t(95155),l=t(12115),n=t(43853),r=t(20063),i=t(4246),d=t(34267);let o=e=>(0,a.jsxs)(d.z,{...e,children:[(0,a.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,a.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]});var c=t(29796);let x=e=>(0,a.jsxs)(d.z,{...e,children:[(0,a.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,a.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,a.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]});var u=t(59364);let m=e=>(0,a.jsx)(d.z,{...e,children:(0,a.jsx)("path",{d:"M10 3L8 8l-5 2 5 2 2 5 2-5 5-2-5-2-2-5zM18 13l-2 5-5-2 5-2 2-5 2 5 5 2-5 2z"})});var h=t(17237);let g=e=>(0,a.jsxs)(d.z,{...e,children:[(0,a.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,a.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,a.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,a.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,a.jsx)("polyline",{points:"10 9 9 9 8 9"})]}),p={a:{1:"ā",2:"\xe1",3:"ǎ",4:"\xe0",5:"a"},e:{1:"ē",2:"\xe9",3:"ě",4:"\xe8",5:"e"},i:{1:"ī",2:"\xed",3:"ǐ",4:"\xec",5:"i"},o:{1:"ō",2:"\xf3",3:"ǒ",4:"\xf2",5:"o"},u:{1:"ū",2:"\xfa",3:"ǔ",4:"\xf9",5:"u"},ü:{1:"ǖ",2:"ǘ",3:"ǚ",4:"ǜ",5:"\xfc"},v:{1:"ǖ",2:"ǘ",3:"ǚ",4:"ǜ",5:"\xfc"}},b=e=>{let{set:s,onClose:t}=e,r=(0,l.useContext)(n.B),[d,b]=(0,l.useState)((null==s?void 0:s.title)||""),[y,j]=(0,l.useState)((null==s?void 0:s.description)||""),[f,v]=(0,l.useState)((null==s?void 0:s.difficulty)||"Medium"),[w,N]=(0,l.useState)((null==s?void 0:s.isPublic)||!1),[z,k]=(0,l.useState)((null==s?void 0:s.items)||[]),[S,C]=(0,l.useState)({hanzi:"",pinyin:"",meaning:"",exampleSentence:""}),[M,A]=(0,l.useState)(null),P=(0,l.useRef)(null),[_,T]=(0,l.useState)(null);if(!r)return null;let{state:R,saveSet:E,generateExample:H}=r;(0,l.useEffect)(()=>{s?(b(s.title),j(s.description),k(s.items),v(s.difficulty),N(s.isPublic||!1)):(b(""),j(""),k([]),v("Medium"),N(!1))},[s]);let L=e=>{T(e),setTimeout(()=>{T(null)},3e3)},I=(e,s)=>{/\d/.test(e)&&s(e.toLowerCase().split(/\s+/).map(e=>(e.match(/([a-züv]+[1-5]?)/g)||[e]).map(e=>{var s;let t=e.match(/^([a-züv]+)([1-5])$/);if(!t)return e;let[,a,l]=t,n=-1;if(a.includes("a")?n=a.indexOf("a"):a.includes("o")?n=a.indexOf("o"):a.includes("e")?n=a.indexOf("e"):a.includes("iu")?n=a.indexOf("u"):a.includes("i")?n=a.indexOf("i"):a.includes("u")?n=a.indexOf("u"):a.includes("\xfc")?n=a.indexOf("\xfc"):a.includes("v")&&(n=a.indexOf("v")),-1===n)return e;let r="v"===a[n]?"v":a[n],i=(null==(s=p[r])?void 0:s[l])||r;return a.substring(0,n)+i+a.substring(n+1)}).join("")).join(" "))},q=async()=>{if(!d)return void alert("Set title cannot be empty.");let e={title:d,description:y,difficulty:f,isPublic:w,items:z,...s&&{_id:s._id}};await E(e),t()},D=(e,s,t)=>{let a=[...z];a[e]={...a[e],[s]:t},k(a)},F=async e=>{let s="new"===e?S:z[e];if(!s.hanzi||!s.pinyin||!s.meaning)return void alert("Please fill in Hanzi, Pinyin, and Meaning before generating an example.");A(e);try{let t=await H(s);t&&("new"===e?C(e=>({...e,exampleSentence:t})):D(e,"exampleSentence",t))}finally{A(null)}},W=async e=>{var s;let t=null==(s=e.target.files)?void 0:s[0],a=e.target;if(t)try{let e=new Uint8Array(await t.arrayBuffer()),s=i.LF(e,{type:"array",cellText:!1,cellDates:!1,raw:!0}),a=s.SheetNames[0],l=s.Sheets[a],n=i.Wp.sheet_to_json(l,{header:1,defval:"",blankrows:!1,raw:!1});if(n.length<1)return void L("Error: The file appears to be empty.");let r=n[0],d=-1,o=-1,c=-1,x=-1,u=["hanzi","chinese","word","character","词","汉字"],m=["pinyin","pronunciation","拼音"],h=["meaning","translation","definition","意思","翻译"],g=["example","sentence","例子","例句"];r.map(e=>e?String(e).toLowerCase().trim():"").forEach((e,s)=>{let t=e.replace(/[\s\uFEFF\xA0_-]+/g,"");u.some(e=>t.includes(e))&&-1===d&&(d=s),m.some(e=>t.includes(e))&&-1===o&&(o=s),h.some(e=>t.includes(e))&&-1===c&&(c=s),g.some(e=>t.includes(e))&&-1===x&&(x=s)});let p=[d,o,c].every(e=>e>-1),b=n;if(p?(console.log("Header detected. Mapping - Hanzi: ".concat(d,", Pinyin: ").concat(o,", Meaning: ").concat(c,", Example: ").concat(x)),b=n.slice(1)):(console.log("No header detected, using positional matching (A=hanzi, B=pinyin, C=meaning, D=example)"),d=0,o=1,c=2,x=r.length>=4?3:-1,r[d]||r[o]||r[c]||(b=n.slice(1))),-1===d||-1===o||-1===c)throw Error("Import failed: Could not automatically detect required columns (hanzi, pinyin, meaning). Please check your file's header row or ensure data is in the correct order.");let y=b.map((e,s)=>{let t=null!=e[d]?String(e[d]).trim():"",a=null!=e[o]?String(e[o]).trim():"",l=null!=e[c]?String(e[c]).trim():"",n=x>-1&&null!=e[x]?String(e[x]).trim():"";if(!t&&!a&&!l)return null;let r={id:"item-import-".concat(Date.now(),"-").concat(s),hanzi:t,pinyin:a,meaning:l};return n&&(r.exampleSentence=n),r}).filter(e=>null!==e);y.length>0?(k(y),L("Successfully imported ".concat(y.length," items."))):L("No valid new items were found in the file.")}catch(e){console.error("File Import Error:",e),L("Import Error: ".concat(e.message))}finally{a&&(a.value="")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:s?"Edit Set":"Create New Set"}),!(null==s?void 0:s.originalSetId)&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-3 text-sm font-medium text-gray-700",children:"Make Publicly Available"}),(0,a.jsxs)("label",{htmlFor:"isPublicToggle",className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",id:"isPublicToggle",className:"sr-only peer",checked:w,onChange:()=>N(!w)}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>b(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Difficulty"}),(0,a.jsx)("div",{className:"mt-2 flex space-x-4",children:["Easy","Medium","Hard"].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"difficulty",value:e,checked:f===e,onChange:()=>v(e),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{value:y,onChange:e=>j(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:2})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Vocabulary Items (",z.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsx)("input",{type:"file",ref:P,onChange:W,className:"hidden",accept:".xlsx, .xls, .csv"}),(0,a.jsxs)("button",{onClick:()=>{let e=i.Wp.aoa_to_sheet([["hanzi","pinyin","meaning","exampleSentence"],["你好","ni3 hao3","hello","你好，世界！ (nǐ hǎo, sh\xec ji\xe8!) - Hello, world!"],["谢谢","xie4 xie","thank you","非常感谢你。 (fēi ch\xe1ng gǎn xi\xe8 nǐ) - Thank you very much."]]),s=i.Wp.book_new();i.Wp.book_append_sheet(s,e,"Template"),i._h(s,"hanziflow_template.xlsx")},className:"flex items-center text-sm bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-3 rounded-md",children:[(0,a.jsx)(g,{size:16,className:"mr-1.5"})," Template"]}),(0,a.jsxs)("button",{onClick:()=>{var e;null==(e=P.current)||e.click()},className:"flex items-center text-sm bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md",children:[(0,a.jsx)(x,{size:16,className:"mr-1.5"})," Import"]}),(0,a.jsxs)("button",{onClick:()=>{if(0===z.length)return void L("There are no items to export.");let e=z.map(e=>({hanzi:e.hanzi,pinyin:e.pinyin,meaning:e.meaning,exampleSentence:e.exampleSentence||""})),s=i.Wp.json_to_sheet(e),t=i.Wp.book_new();i.Wp.book_append_sheet(t,s,"Vocabulary");let a=d.replace(/[^a-z0-9]/gi,"_").toLowerCase();i._h(t,"".concat(a||"vocab_set",".xlsx"))},className:"flex items-center text-sm bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-3 rounded-md",children:[(0,a.jsx)(u.s,{size:16,className:"mr-1.5"})," Export"]})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:z.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 border bg-gray-50 rounded-md",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-2 items-center",children:[(0,a.jsx)("input",{type:"text",value:e.hanzi,placeholder:"Hanzi",onChange:e=>D(s,"hanzi",e.target.value),className:"border p-2 rounded-md md:col-span-2"}),(0,a.jsx)("input",{type:"text",value:e.pinyin,placeholder:"nǐ hǎo (or ni3 hao3)",onChange:e=>D(s,"pinyin",e.target.value),onBlur:e=>I(e.target.value,e=>D(s,"pinyin",e)),className:"border p-2 rounded-md md:col-span-2"}),(0,a.jsx)("input",{type:"text",value:e.meaning,placeholder:"Meaning",onChange:e=>D(s,"meaning",e.target.value),className:"border p-2 rounded-md md:col-span-2"}),(0,a.jsx)("button",{onClick:()=>{var s;return s=e.id,void k(z.filter(e=>e.id!==s))},"aria-label":"Delete word ".concat(e.hanzi),title:"Delete word",className:"text-red-500 hover:text-red-700 p-2 justify-self-center",children:(0,a.jsx)(c.u,{size:20})})]}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)("textarea",{value:e.exampleSentence||"",placeholder:"Example sentence",onChange:e=>D(s,"exampleSentence",e.target.value),className:"w-full border p-2 rounded-md",rows:3}),(0,a.jsx)("button",{onClick:()=>F(s),"aria-label":"Generate example for ".concat(e.hanzi),className:"ml-2 p-2 h-10 w-10 flex-shrink-0 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200 disabled:bg-gray-200 disabled:cursor-not-allowed",disabled:null!==M||!e.hanzi||!e.pinyin||!e.meaning,title:"Generate Example with AI",children:M===s?(0,a.jsx)(h.A,{}):(0,a.jsx)(m,{size:20})})]})]},e.id))}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 items-center",children:[(0,a.jsx)("input",{type:"text",value:S.hanzi,onChange:e=>C(s=>({...s,hanzi:e.target.value})),placeholder:"新 (xīn)",className:"border p-2 rounded-md"}),(0,a.jsx)("input",{type:"text",value:S.pinyin,onChange:e=>C(s=>({...s,pinyin:e.target.value})),onBlur:e=>I(e.target.value,e=>C(s=>({...s,pinyin:e}))),placeholder:"nǐ hǎo (or ni3 hao3)",className:"border p-2 rounded-md"}),(0,a.jsx)("input",{type:"text",value:S.meaning,onChange:e=>C(s=>({...s,meaning:e.target.value})),placeholder:"new",className:"border p-2 rounded-md"})]}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)("textarea",{value:S.exampleSentence||"",onChange:e=>C(s=>({...s,exampleSentence:e.target.value})),placeholder:"Example: 这是我的新书 (zh\xe8 sh\xec wǒ de xīn shū)",className:"w-full border p-2 rounded-md",rows:3}),(0,a.jsx)("button",{onClick:()=>F("new"),"aria-label":"Generate example for new word",className:"ml-2 p-2 h-10 w-10 flex-shrink-0 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200 disabled:bg-gray-200 disabled:cursor-not-allowed",disabled:null!==M||!S.hanzi||!S.pinyin||!S.meaning,title:"Generate Example with AI",children:"new"===M?(0,a.jsx)(h.A,{}):(0,a.jsx)(m,{size:20})})]})]}),(0,a.jsxs)("button",{onClick:()=>{S.hanzi&&S.pinyin&&S.meaning&&(k([...z,{...S,id:"item-".concat(Date.now())}]),C({hanzi:"",pinyin:"",meaning:"",exampleSentence:""}))},className:"mt-2 flex items-center text-sm bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-md",children:[(0,a.jsx)(o,{size:16,className:"mr-2"})," Add Word"]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:t,className:"py-2 px-4 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{onClick:q,disabled:R.isLoading,className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 w-32 text-center",children:R.isLoading?(0,a.jsx)(h.A,{}):s?"Save Changes":"Create Set"})]}),_&&(0,a.jsx)("div",{className:"absolute bottom-5 left-1/2 -translate-x-1/2 bg-gray-800 text-white py-2 px-5 rounded-lg shadow-lg animate-fade-in-out",children:_})]})}),(0,a.jsx)("style",{children:"\n          @keyframes fade-in-out {\n              0% { opacity: 0; transform: translateY(10px) translateX(-50%); }\n              10% { opacity: 1; transform: translateY(0) translateX(-50%); }\n              90% { opacity: 1; transform: translateY(0) translateX(-50%); }\n              100% { opacity: 0; transform: translateY(10px) translateX(-50%); }\n          }\n          .animate-fade-in-out {\n              animation: fade-in-out 3s ease-in-out forwards;\n          }\n      "})]})};var y=t(3903),j=t(75564),f=t(92540),v=t(44859);let w=e=>(0,a.jsxs)(d.z,{...e,children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),(0,a.jsx)("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),N=l.memo(e=>{let{set:s,onStartSession:t,onReviewQuiz:l,onProgress:n,onEdit:r,onDelete:i}=e,d=s.items.filter(e=>e.needsReview).length,o="Hard"===s.difficulty?5:"Easy"===s.difficulty?3:4;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 flex flex-col justify-between hover:shadow-xl transition-shadow duration-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 pr-2 flex items-center gap-2",children:[s.title,s.isPublic&&(0,a.jsx)(w,{size:18,className:"text-gray-400",title:"This set is public"})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full whitespace-nowrap ".concat({Easy:"bg-green-100 text-green-800",Medium:"bg-blue-100 text-blue-800",Hard:"bg-red-100 text-red-800"}[s.difficulty]),children:s.difficulty})]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2 mb-4 h-12 overflow-hidden",children:s.description}),(0,a.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:[s.items.length," words"]})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap gap-2 justify-end items-center",children:[(0,a.jsxs)("button",{onClick:()=>t(s),className:"flex items-center text-sm bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md transition duration-200",children:[(0,a.jsx)(y.R,{size:16,className:"mr-1.5"})," Practice"]}),(0,a.jsxs)("button",{disabled:d<o,onClick:()=>l(s._id),className:"flex items-center text-sm bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-3 rounded-md transition duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed",title:d<o?"Need at least ".concat(o," words for review (you have ").concat(d,")."):"Quiz ".concat(d," review words"),children:[(0,a.jsx)(f.G,{size:16,className:"mr-1.5"})," Review"]}),(0,a.jsx)("button",{onClick:()=>n(s._id),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-gray-100 rounded-full",title:"View Progress",children:(0,a.jsx)(v.r,{size:20})}),(0,a.jsx)("button",{onClick:()=>r(s),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-gray-100 rounded-full",children:(0,a.jsx)(j.q,{size:20})}),(0,a.jsx)("button",{onClick:()=>i(s._id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-gray-100 rounded-full",children:(0,a.jsx)(c.u,{size:20})})]})]})}),z=e=>(0,a.jsxs)(d.z,{...e,children:[(0,a.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,a.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,a.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),k=e=>(0,a.jsxs)(d.z,{...e,children:[(0,a.jsx)("path",{d:"M12 2a4.5 4.5 0 0 0-4.5 4.5v.45a.45.45 0 0 1-.45.45A3.5 3.5 0 0 0 3.5 11V14a1 1 0 0 0 1 1h1.5a.5.5 0 0 0 .5-.5V14a1 1 0 0 0-1-1H4.5a2.5 2.5 0 1 1 2.5-2.5.45.45 0 0 1 .45-.45v-.1A3.5 3.5 0 0 1 11 4.5a2.5 2.5 0 0 1 2.5 2.5v.1a.45.45 0 0 1 .45.45A2.5 2.5 0 1 1 16.5 10H15a1 1 0 0 0-1 1v.5a.5.5 0 0 0 .5.5H16a1 1 0 0 0 1-1v-3a3.5 3.5 0 0 0-3.5-3.5A.45.45 0 0 1 13 6.95v-.45A4.5 4.5 0 0 0 12 2z"}),(0,a.jsx)("path",{d:"M6.5 11.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5zM17.5 11.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5z"}),(0,a.jsx)("path",{d:"M12 11.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5z"}),(0,a.jsx)("path",{d:"M12 20.5v-2"}),(0,a.jsx)("path",{d:"M9 16.5v-2"}),(0,a.jsx)("path",{d:"M15 16.5v-2"})]});var S=t(43973),C=t(8695);let M=e=>{let{onClose:s,onSetCreated:t}=e,r=(0,l.useContext)(n.B),[i,d]=(0,l.useState)(""),[o,c]=(0,l.useState)(10),[x,u]=(0,l.useState)(!1),[m,g]=(0,l.useState)(null),[p,b]=(0,l.useState)(!1);if(!r)return null;let{saveSet:y,generateSetWithAI:j}=r,f=async()=>{if(!i.trim())return void alert("Please enter a topic.");u(!0),g(null);try{let e=await j(i,o);e&&g(e)}finally{u(!1)}},v=async()=>{if(!m||0===m.length)return void alert("No items to save.");let e={title:"AI: ".concat(i),description:"An AI-generated set about ".concat(i," with ").concat(m.length," words."),difficulty:"Medium",items:m};await y(e),s()};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-6 border-b flex items-center",children:[(0,a.jsx)(k,{className:"h-6 w-6 mr-3 text-purple-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Generate Set with AI"})]}),m?(0,a.jsxs)("div",{className:"p-6 overflow-y-auto",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:['Generated Words for "',i,'"']}),(0,a.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.hanzi}),(0,a.jsx)("span",{className:"text-gray-600",children:e.pinyin}),(0,a.jsx)("span",{className:"text-gray-800",children:e.meaning})]}),e.exampleSentence&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2 italic whitespace-pre-wrap",children:['"',e.exampleSentence,'"']})]},e.id))})]}):(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Enter a topic and let AI create a vocabulary set for you. Great for exploring new subjects!"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsxs)("button",{onClick:()=>b(!p),className:"w-full flex justify-between items-center p-3 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(S.V,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Pro Tips for Better Results"})]}),(0,a.jsx)(C.D,{size:20,className:"transition-transform text-gray-500 ".concat(p?"rotate-180":"")})]}),(0,a.jsx)("div",{className:"transition-all duration-300 ease-in-out overflow-hidden ".concat(p?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:(0,a.jsxs)("div",{className:"p-4 border-t text-sm text-gray-600 space-y-3",children:[(0,a.jsx)("p",{children:"The AI is great at generating lists for specific themes. Be as descriptive as you like!"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-800",children:"Important:"})," Always review the generated words. The AI can sometimes make mistakes with pinyin or provide less common translations."]}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:"Example Prompts:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-2",children:[(0,a.jsx)("li",{children:"Common fruits in China"}),(0,a.jsx)("li",{children:"HSK 3 verbs"}),(0,a.jsx)("li",{children:"Adjectives for describing personality"}),(0,a.jsx)("li",{children:"Words related to business meetings"})]})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"topic",className:"block text-sm font-medium text-gray-700",children:"Topic"}),(0,a.jsx)("input",{id:"topic",type:"text",value:i,onChange:e=>d(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., Chinese Food, Traveling, HSK 2 Verbs"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"wordCount",className:"block text-sm font-medium text-gray-700",children:"Number of Words (5-20)"}),(0,a.jsx)("input",{id:"wordCount",type:"number",value:o,min:"5",max:"20",onChange:e=>c(parseInt(e.target.value,10)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-purple-500 focus:border-purple-500"})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"py-2 px-4 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),m?(0,a.jsx)("button",{onClick:v,className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save this Set"}):(0,a.jsx)("button",{onClick:f,disabled:x,className:"py-2 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 w-36 text-center disabled:bg-purple-300",children:x?(0,a.jsx)(h.A,{}):"Generate"})]})]})})};var A=t(44623);let P=e=>(0,a.jsxs)(d.z,{...e,children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,a.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,a.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),(0,a.jsx)("path",{d:"m9 16 2 2 4-4"})]}),_=e=>{let{user:s,userStats:t,onStartReview:n}=e,{mastery:r,reviewForecast:i,setsForReview:d}=t,o=d.reduce((e,s)=>e+s.dueCount,0),c=Math.floor(s.xp/100)+1,x=s.xp%100,u=x/100*100,m=[{key:"mastered",label:"Mastered",color:"bg-green-500",value:r.mastered},{key:"known",label:"Known",color:"bg-blue-500",value:r.known},{key:"learning",label:"Learning",color:"bg-yellow-500",value:r.learning},{key:"new",label:"New",color:"bg-gray-300",value:r.new}],h=Math.max(...i.map(e=>e.count),1),g=(0,l.useMemo)(()=>i.reduce((e,s)=>e+s.count,0),[i]),p=new Date().toISOString().split("T")[0],b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Learning Overview"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-baseline mb-1",children:[(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-700",children:["Level ",c]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[x," / ",100," XP"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(u,"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-600",children:"Current Streak"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-1",children:[(0,a.jsx)(A.h,{className:"h-6 w-6 text-orange-500"}),(0,a.jsxs)("span",{className:"font-bold text-xl text-orange-600",children:[s.currentStreak," day",1!==s.currentStreak?"s":""]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-600",children:"Longest Streak"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-1",children:[(0,a.jsx)(A.h,{className:"h-6 w-6 text-red-500"}),(0,a.jsxs)("span",{className:"font-bold text-xl text-red-600",children:[s.longestStreak," day",1!==s.longestStreak?"s":""]})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("h4",{className:"font-bold text-lg text-gray-700 flex items-center mb-3",children:[(0,a.jsx)(k,{size:20,className:"mr-2 text-purple-600"}),"Word Mastery (",r.total," total)"]}),r.total>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex w-full h-3 rounded-full overflow-hidden mb-3",children:m.map(e=>(0,a.jsx)("div",{className:e.color,style:{width:"".concat(((e,s)=>s>0?e/s*100:0)(e.value,r.total),"%")},title:"".concat(e.label,": ").concat(e.value)},e.key))}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:m.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(e.color," mr-2")}),(0,a.jsxs)("span",{children:[e.label,":"]}),(0,a.jsx)("span",{className:"font-semibold ml-auto",children:e.value})]},e.label))})]}):(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Add words to a set to track your mastery."})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("h4",{className:"font-bold text-lg text-gray-700 flex items-center",children:[(0,a.jsx)(P,{size:20,className:"mr-2 text-green-600"}),"Review Forecast"]}),g>0&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 font-medium",children:[g," reviews this week"]})]}),g>0?(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"flex justify-between h-32 px-2 border-b border-gray-200",children:i.map(e=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col justify-end items-center relative group",children:[(0,a.jsxs)("div",{className:"absolute -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:[e.count," words"]}),(0,a.jsx)("div",{className:"w-6 bg-gray-200 rounded-t-md flex-grow flex items-end",children:(0,a.jsx)("div",{className:"".concat(e.date===p?"bg-green-500":"bg-gray-400"," w-full rounded-t-md transition-all duration-300"),style:{height:"".concat(e.count/h*100,"%")}})}),(0,a.jsx)("span",{className:"mt-1 text-xs font-semibold ".concat(e.date===p?"text-green-600":"text-gray-500"),children:b[new Date(e.date+"T00:00:00").getDay()]})]},e.date))})}):(0,a.jsxs)("div",{className:"text-center py-8 px-4 bg-gray-50 rounded-md border-2 border-dashed",children:[(0,a.jsx)("p",{className:"text-gray-600 font-medium",children:"Your week is clear!"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No reviews scheduled. Time to learn some new words."})]}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsxs)("button",{onClick:n,disabled:0===o,className:"w-full py-2 px-4 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:["Review ",o>0?"".concat(o," "):""," Word",1!==o?"s":""]})})]})]})},T=e=>{let{isOpen:s,onClose:t,setsForReview:l,onStartSetReview:n}=e;return s?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-lg animate-fade-in",children:[(0,a.jsxs)("div",{className:"p-6 border-b",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Start a Review Session"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"You have words to review in the following sets. Pick one to begin!"})]}),(0,a.jsx)("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:l.length>0?(0,a.jsx)("ul",{className:"space-y-3",children:l.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.setTitle}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.dueCount," word",1!==e.dueCount?"s":""," to review"]})]}),(0,a.jsxs)("button",{onClick:()=>{n(e.setId),t()},className:"flex items-center text-sm bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-3 rounded-md transition duration-200",children:[(0,a.jsx)(S.V,{size:16,className:"mr-1.5"})," Review"]})]},e.setId))}):(0,a.jsx)("p",{className:"text-center text-gray-500",children:"No items are due for review right now."})}),(0,a.jsx)("div",{className:"p-4 bg-gray-50 border-t flex justify-end",children:(0,a.jsx)("button",{onClick:t,className:"py-2 px-4 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Close"})})]}),(0,a.jsx)("style",{children:"\n        @keyframes fade-in {\n            from { opacity: 0; transform: scale(0.95); }\n            to { opacity: 1; transform: scale(1); }\n        }\n        .animate-fade-in {\n            animation: fade-in 0.2s ease-out forwards;\n        }\n      "})]}):null};var R=t(90255),E=t(14574);let H=e=>(0,a.jsx)(d.z,{...e,children:(0,a.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),L=e=>{let{set:s,onClose:t}=e,n=(0,r.useRouter)(),[i,d]=(0,l.useState)("study"),[o,c]=(0,l.useState)("all"),[x,u]=(0,l.useState)("standard"),[m,h]=(0,l.useState)(10),[g,p]=(0,l.useState)([]),b=s.items.filter(e=>e.needsReview).length,y=s.items.length>=4;return(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-lg animate-fade-in",children:[(0,a.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Practice Session"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 truncate",children:s.title})]}),(0,a.jsx)("button",{onClick:t,className:"p-1 rounded-full hover:bg-gray-200",children:(0,a.jsx)(E.u,{size:24})})]}),(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex rounded-lg p-1 bg-gray-200",children:[(0,a.jsx)("button",{onClick:()=>d("study"),className:"w-1/2 py-2 text-center rounded-md font-semibold transition-colors ".concat("study"===i?"bg-white shadow":"text-gray-600"),children:"Study"}),(0,a.jsx)("button",{onClick:()=>d("quiz"),disabled:!y,className:"w-1/2 py-2 text-center rounded-md font-semibold transition-colors ".concat("quiz"===i?"bg-white shadow":"text-gray-600"," disabled:text-gray-400 disabled:cursor-not-allowed"),title:y?"":"You need at least ".concat(4," words to start a quiz."),children:"Quiz"})]})}),(0,a.jsx)("div",{className:"p-6 max-h-[50vh] overflow-y-auto",children:"study"===i?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-700",children:"Study Options"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"studyMode",value:"all",checked:"all"===o,onChange:()=>c("all"),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,a.jsxs)("span",{className:"ml-3 text-gray-800",children:["Study All Words (",s.items.length,")"]})]}),(0,a.jsxs)("label",{className:"flex items-center p-3 border rounded-lg ".concat(0===b?"cursor-not-allowed bg-gray-100":"cursor-pointer hover:bg-gray-50"),children:[(0,a.jsx)("input",{type:"radio",name:"studyMode",value:"review",checked:"review"===o,onChange:()=>c("review"),disabled:0===b,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,a.jsxs)("span",{className:"ml-3 ".concat(0===b?"text-gray-400":"text-gray-800"),children:["Study Review Words Only (",b,")"]})]})]})]}):y?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-700 mb-2",children:"Quiz Mode"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>u("standard"),className:"flex flex-col items-center p-4 border-2 rounded-lg ".concat("standard"===x?"border-blue-500 bg-blue-50":"border-gray-300"),children:[(0,a.jsx)(S.V,{size:24,className:"mb-1"})," Standard"]}),(0,a.jsxs)("button",{onClick:()=>u("lightning"),className:"flex flex-col items-center p-4 border-2 rounded-lg ".concat("lightning"===x?"border-purple-500 bg-purple-50":"border-gray-300"),children:[(0,a.jsx)(H,{size:24,className:"mb-1"})," Lightning"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-700 mb-2",children:"Number of Questions"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[[10,20].map(e=>(0,a.jsx)("button",{onClick:()=>h(e),className:"py-2 px-4 rounded-md border ".concat(m===e?"bg-blue-500 text-white":"bg-white"),children:e},e)),(0,a.jsxs)("button",{onClick:()=>h(s.items.length),className:"py-2 px-4 rounded-md border ".concat(m===s.items.length?"bg-blue-500 text-white":"bg-white"),children:["All (",s.items.length,")"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-700 mb-2",children:"Question Types (optional)"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Select specific types, or leave blank for a mix."}),(0,a.jsx)("div",{className:"flex space-x-2",children:["meaning","hanzi","pinyin"].map(e=>(0,a.jsx)("button",{onClick:()=>(e=>{p(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(e),className:"py-2 px-4 rounded-full bordercapitalize ".concat(g.includes(e)?"bg-blue-500 text-white":"bg-white"),children:e},e))})]})]}):(0,a.jsxs)("div",{className:"text-center text-gray-500",children:["You need at least ",4," words in this set to start a quiz."]})}),(0,a.jsx)("div",{className:"p-4 bg-gray-50 border-t flex justify-end",children:(0,a.jsx)("button",{onClick:()=>{if("study"===i)n.push("/set/".concat(s._id,"/study?studyMode=").concat(o));else if("lightning"===x){let e=new URLSearchParams;e.append("questionCount",String(m)),g.length>0&&e.append("types",g.join(",")),n.push("/set/".concat(s._id,"/lightning-quiz?").concat(e.toString()))}else{let e=new URLSearchParams;e.append("quizType","standard"),e.append("questionCount",String(m)),g.length>0&&e.append("types",g.join(",")),n.push("/set/".concat(s._id,"/quiz?").concat(e.toString()))}t()},disabled:"quiz"===i&&!y,className:"w-full py-3 px-4 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:"Start"})})]}),(0,a.jsx)("style",{children:"\n        @keyframes fade-in {\n            from { opacity: 0; transform: scale(0.95); }\n            to { opacity: 1; transform: scale(1); }\n        }\n        .animate-fade-in {\n            animation: fade-in 0.2s ease-out forwards;\n        }\n      "})]})},I=()=>{let e=(0,l.useContext)(n.B),[s,t]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),[c,x]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),[g,p]=(0,l.useState)(null),[y,j]=(0,l.useState)(null),f=(0,r.useRouter)();if(!e)return(0,a.jsx)(h.A,{});let{state:v,deleteSet:w,fetchSets:S}=e,C=(0,l.useCallback)(e=>{j(e),t(!0)},[]),A=(0,l.useCallback)(async e=>{window.confirm("Are you sure you want to delete this set? This cannot be undone.")&&await w(e)},[w]),P=(0,l.useCallback)(e=>{p(e),m(!0)},[]),E=(0,l.useCallback)(e=>{f.push("/set/".concat(e,"/quiz?quizType=review"))},[f]),H=(0,l.useCallback)(e=>{f.push("/set/".concat(e,"/progress"))},[f]),I=(0,l.useCallback)(()=>{v.userStats&&v.userStats.setsForReview.length>0&&x(!0)},[v.userStats]),q=v.user,D=v.vocabSets,F=v.setsPagination,W=v.userStats;return v.isLoading&&!W?(0,a.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,a.jsx)(h.A,{}),(0,a.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading your data..."})]}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"My Vocabulary Sets"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>d(!0),className:"flex items-center bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[(0,a.jsx)(k,{size:20,className:"mr-2"}),"Generate with AI"]}),(0,a.jsxs)("button",{onClick:()=>{j(null),t(!0)},className:"flex items-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105",children:[(0,a.jsx)(o,{size:20,className:"mr-2"}),"New Set"]})]})]}),F&&0===F.totalSets?(0,a.jsxs)("div",{className:"text-center py-16 px-6 bg-white rounded-lg shadow-md border-2 border-dashed border-gray-300",children:[(0,a.jsx)(z,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"Create Your First Vocabulary Set"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:'Your learning journey begins here. Click "New Set" to add words manually, or "Generate with AI" to get started instantly.'})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 transition-opacity duration-300 ".concat(v.isLoading&&D.length>0?"opacity-50":"opacity-100"),children:D.map(e=>(0,a.jsx)(N,{set:e,onStartSession:P,onReviewQuiz:E,onProgress:H,onEdit:C,onDelete:A},e._id))}),F&&F.totalPages>1&&(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsx)(R.A,{currentPage:F.currentPage,totalPages:F.totalPages,onPageChange:e=>{S(e)},isDisabled:v.isLoading})})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"sticky top-24 space-y-8",children:[q&&W&&(0,a.jsx)(_,{user:q,userStats:W,onStartReview:I}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Recent Quiz History"}),0===v.quizHistory.length?(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"You haven't completed any quizzes yet. Take a quiz to see your history here!"}):(0,a.jsx)("ul",{className:"space-y-4",children:v.quizHistory.slice(0,3).map(e=>{let s=e.total>0?Math.round(e.score/e.total*100):0;return(0,a.jsxs)("li",{className:"p-3 bg-gray-50 rounded-md border border-gray-200",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:e.vocabSet.title}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm mt-1",children:[(0,a.jsxs)("p",{className:"font-bold text-blue-600",children:[e.score,"/",e.total," (",s,"%)"]}),(0,a.jsx)("p",{className:"text-gray-500",children:(e=>{let s=new Date(e),t=Math.round((new Date().getTime()-s.getTime())/1e3),a=Math.round(t/60),l=Math.round(a/60),n=Math.round(l/24);return t<60?"just now":a<60?"".concat(a," minute").concat(a>1?"s":""," ago"):l<24?"".concat(l," hour").concat(l>1?"s":""," ago"):n<7?"".concat(n," day").concat(n>1?"s":""," ago"):s.toLocaleDateString()})(e.createdAt)})]})]},e._id)})})]})]})}),s&&(0,a.jsx)(b,{set:y,onClose:()=>{t(!1),j(null)}}),i&&(0,a.jsx)(M,{onClose:()=>d(!1),onSetCreated:e=>{d(!1),C(e)}}),c&&W&&(0,a.jsx)(T,{isOpen:c,onClose:()=>x(!1),setsForReview:W.setsForReview,onStartSetReview:E}),u&&g&&(0,a.jsx)(L,{set:g,onClose:()=>m(!1)})]})};function q(){return(0,l.useContext)(n.B)?(0,a.jsx)(l.Suspense,{fallback:(0,a.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,a.jsx)(h.A,{}),(0,a.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading page..."})]}),children:(0,a.jsx)(I,{})}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)(h.A,{})})}},75564:(e,s,t)=>{"use strict";t.d(s,{q:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsxs)(l.z,{...e,children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},83686:()=>{},90255:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(95155);t(12115);var l=t(34267);let n=e=>(0,a.jsx)(l.z,{...e,children:(0,a.jsx)("polyline",{points:"15 18 9 12 15 6"})}),r=e=>(0,a.jsx)(l.z,{...e,children:(0,a.jsx)("polyline",{points:"9 18 15 12 9 6"})}),i=e=>{let{currentPage:s,totalPages:t,onPageChange:l,isDisabled:i=!1}=e,d=(()=>{let e=[],a=Math.floor(2.5);if(t<=5)for(let s=1;s<=t;s++)e.push(s);else if(s<=a){for(let s=1;s<=4;s++)e.push(s);e.push("..."),e.push(t)}else if(s>=t-a){e.push(1),e.push("...");for(let s=t-3;s<=t;s++)e.push(s)}else{e.push(1),e.push("...");for(let t=s-1;t<=s+1;t++)e.push(t);e.push("..."),e.push(t)}return e})(),o=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"h-10 px-4 flex items-center justify-center font-semibold rounded-md transition-colors border ".concat(e?"bg-blue-600 border-blue-600 text-white cursor-default":"bg-white border-gray-300 text-gray-600 hover:bg-gray-100"," disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed")};return(0,a.jsx)("nav",{"aria-label":"Pagination",children:(0,a.jsxs)("ul",{className:"flex items-center gap-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>l(s-1),disabled:1===s||i,className:"".concat(o()," p-2"),"aria-label":"Go to previous page",children:(0,a.jsx)(n,{size:20})})}),d.map((e,t)=>(0,a.jsx)("li",{children:"number"==typeof e?(0,a.jsx)("button",{onClick:()=>l(e),disabled:i,className:o(e===s),"aria-current":e===s?"page":void 0,children:e}):(0,a.jsx)("span",{className:"h-10 px-4 flex items-center justify-center text-gray-500",children:e})},t)),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>l(s+1),disabled:s===t||i,className:"".concat(o()," p-2"),"aria-label":"Go to next page",children:(0,a.jsx)(r,{size:20})})})]})})}},92540:(e,s,t)=>{"use strict";t.d(s,{G:()=>n});var a=t(95155);t(12115);var l=t(34267);let n=e=>{let{filled:s,...t}=e;return(0,a.jsx)(l.z,{...t,children:(0,a.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",fill:s?"currentColor":"none"})})}}},e=>{e.O(0,[798,524,853,441,255,358],()=>e(e.s=54724)),_N_E=e.O()}]);