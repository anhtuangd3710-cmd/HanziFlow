exports.id=644,exports.ids=[644],exports.modules={16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g,metadata:()=>f});var d=c(75338),e=c(74725);c(82704);let f={title:"HanziFlow - Learn Chinese Characters & Vocabulary",description:"Master Chinese characters, build vocabulary, and track your progress with HanziFlow - your personal Chinese learning companion.",keywords:"chinese learning, hanzi, vocabulary, language learning, chinese characters",authors:[{name:"HanziFlow Team"}],openGraph:{type:"website",locale:"en_US",url:"https://hanziflow.com",title:"HanziFlow - Learn Chinese Characters & Vocabulary",description:"Master Chinese characters, build vocabulary, and track your progress with HanziFlow - your personal Chinese learning companion.",siteName:"HanziFlow",images:[{url:"/logo.png",width:1024,height:1024,alt:"HanziFlow Logo",type:"image/png"}]},twitter:{card:"summary_large_image",title:"HanziFlow - Learn Chinese Characters & Vocabulary",description:"Master Chinese characters, build vocabulary, and track your progress with HanziFlow",images:["/logo.png"]},icons:{icon:[{url:"/favicon-16x16.png",sizes:"16x16",type:"image/png"},{url:"/favicon-32x32.png",sizes:"32x32",type:"image/png"},{url:"/favicon.ico",sizes:"any"}],apple:"/logo.png"}};function g({children:a}){return(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsx)("head",{children:(0,d.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})}),(0,d.jsx)("body",{children:(0,d.jsx)(e.AppProvider,{children:a})})]})}},17204:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},34349:(a,b,c)=>{Promise.resolve().then(c.bind(c,74725))},39727:()=>{},47990:()=>{},49361:(a,b,c)=>{"use strict";c.d(b,{AU:()=>g,FQ:()=>h,m7:()=>e,r:()=>i});var d=c(36678);let e="API_KEY_FAILURE",f=()=>{let a="AIzaSyCEWxC0Xjw1kpByT3xyvTWkxcegD3pM3CQ";if(!a)throw console.warn("No API key found. Prompting user."),Error(e);return new d.M4({apiKey:a})},g=a=>{alert("Sorry, your browser does not support text-to-speech.")},h=async a=>{let b=`Create a simple and clear example sentence in Chinese for a beginner learning the word "${a.hanzi}" (pinyin: ${a.pinyin}), which means "${a.meaning}". The sentence should use common vocabulary. Provide only the Chinese sentence with its pinyin and the English translation below it, like this:
Chinese sentence (Pinyin)
English Translation`;try{let a=f(),c=await a.models.generateContent({model:"gemini-2.5-flash",contents:b});return c.text?c.text.trim():null}catch(a){if(console.error("Error generating example sentence:",a),a instanceof Error){let b=a.message.toLowerCase();if(b.includes("api key not valid")||b.includes("permission denied")||b.includes("quota")||b.includes("api_key"))throw Error(e)}return alert("Failed to generate an example sentence. The AI model may be temporarily unavailable."),null}},i=async(a,b)=>{let c=`Generate a list of ${b} Chinese vocabulary words related to the topic "${a}".
The words should be suitable for a beginner to intermediate learner.
For each word, provide the Hanzi, standard Pinyin with correct tone marks, a concise English meaning, and a simple example sentence in Chinese.
IMPORTANT: Respond ONLY with a valid JSON array of objects inside a single markdown code block (\`\`\`json ... \`\`\`). Do not include any other text, explanation, or introductory phrases.
Each object in the array must have these exact keys: "hanzi", "pinyin", "meaning", "exampleSentence".`;try{let a=f(),b=await a.models.generateContent({model:"gemini-2.5-flash",contents:c});if(b.promptFeedback?.blockReason)throw console.error("AI response was blocked:",b.promptFeedback),Error(`The request was blocked for safety reasons: ${b.promptFeedback.blockReasonMessage||b.promptFeedback.blockReason}`);if(!b.text)throw Error("No response text received from AI model");let d=(a=>{let b=a.match(/```json\s*([\s\S]*?)\s*```/),c=b?b[1]:a;try{return JSON.parse(c.trim())}catch(b){throw console.error("Failed to parse JSON from model response:",b),console.error("Original text from model:",a),Error("Model returned invalid JSON format.")}})(b.text);if(!Array.isArray(d))throw console.error("Parsed JSON is not an array:",d),Error("AI did not return the expected list format.");return d}catch(a){if(console.error("Error generating vocab set:",a),a instanceof Error){let b=a.message.toLowerCase();if(b.includes("api key not valid")||b.includes("permission denied")||b.includes("quota")||b.includes("api_key"))throw Error(e);let c="Failed to generate a vocabulary set with AI. The model may be temporarily unavailable. Please try again later.";a.message.startsWith("Model returned")||a.message.startsWith("AI did not return")?c="Failed to generate a valid vocabulary set with AI. The AI's response was not in the correct format. Please try a different topic or try again later.":a.message.startsWith("The request was blocked")&&(c=`AI generation failed: ${a.message}. Please try a different topic.`),alert(c)}else alert("An unknown error occurred while generating the vocabulary set.");return null}}},52827:(a,b,c)=>{"use strict";c.d(b,{AppProvider:()=>l,B:()=>j});var d=c(21124),e=c(38301),f=c(77243),g=c(49361);let h={user:null,isHydrated:!1,vocabSets:[],setsPagination:null,publicSets:[],publicSetsPagination:null,quizHistory:[],profileQuizHistory:null,userStats:null,leaderboard:null,isLoading:!1,isRequestingUserApiKey:!1,adminStats:null,adminUsers:null,adminUsersPagination:null},i=(a,b)=>{switch(b.type){case"LOGIN":return{...a,user:b.payload,isLoading:!1,isHydrated:!0};case"LOGOUT":return{...h,isHydrated:!0};case"HYDRATE":return{...a,user:b.payload,isHydrated:!0};case"UPDATE_USER":if(!a.user)return a;return{...a,user:{...a.user,...b.payload}};case"SET_LOADING":return{...a,isLoading:b.payload};case"SETS_LOADED":return{...a,vocabSets:b.payload.sets,setsPagination:{currentPage:b.payload.page,totalPages:b.payload.pages,totalSets:b.payload.total,limit:6}};case"PUBLIC_SETS_LOADED":return{...a,publicSets:b.payload.sets,publicSetsPagination:{currentPage:b.payload.page,totalPages:b.payload.pages,totalSets:b.payload.total,limit:9},isLoading:!1};case"UPDATE_SET":return{...a,vocabSets:a.vocabSets.map(a=>a._id===b.payload._id?b.payload:a)};case"HISTORY_LOADED":return{...a,quizHistory:b.payload};case"PROFILE_HISTORY_LOADED":return{...a,profileQuizHistory:b.payload,isLoading:!1};case"USER_STATS_LOADED":return{...a,userStats:b.payload};case"LEADERBOARD_LOADED":return{...a,leaderboard:b.payload,isLoading:!1};case"REQUEST_USER_API_KEY":return{...a,isRequestingUserApiKey:b.payload};case"ADMIN_STATS_LOADED":return{...a,adminStats:b.payload,isLoading:!1};case"ADMIN_USERS_LOADED":return{...a,adminUsers:b.payload.users,adminUsersPagination:{currentPage:b.payload.currentPage,totalPages:b.payload.totalPages},isLoading:!1};default:return a}},j=(0,e.createContext)(void 0),k="hanziflow_user",l=({children:a})=>{let[b,c]=(0,e.useReducer)(i,h);(0,e.useEffect)(()=>{let a=localStorage.getItem(k)||sessionStorage.getItem(k);if(a)try{let b=JSON.parse(a);c({type:"HYDRATE",payload:b})}catch{localStorage.removeItem(k),sessionStorage.removeItem(k),c({type:"HYDRATE",payload:null})}else c({type:"HYDRATE",payload:null})},[]);let l=async(a,b,d)=>{c({type:"SET_LOADING",payload:!0});try{let e=await f.Lx(a,b);(d?localStorage:sessionStorage).setItem(k,JSON.stringify(e)),c({type:"LOGIN",payload:e})}catch(a){console.error(a),alert(a.message||"Login failed. Please check your credentials."),c({type:"SET_LOADING",payload:!1})}},m=async(a,b,d)=>{c({type:"SET_LOADING",payload:!0});try{let e=await f.DY(a,b,d);sessionStorage.setItem(k,JSON.stringify(e)),c({type:"LOGIN",payload:e})}catch(a){console.error(a),alert(a.message||"Registration failed. Please try again."),c({type:"SET_LOADING",payload:!1})}},n=(0,e.useCallback)(()=>{localStorage.removeItem(k),sessionStorage.removeItem(k),c({type:"LOGOUT"})},[]),o=(0,e.useCallback)(async a=>{if(b.user?.token){c({type:"SET_LOADING",payload:!0});try{let b=await f.Uy(a,6);c({type:"SETS_LOADED",payload:b})}catch(a){console.error("Failed to fetch sets:",a),a instanceof f.lR&&(alert(a.message),n())}finally{c({type:"SET_LOADING",payload:!1})}}},[b.user?.token,n]),p=(0,e.useCallback)(async()=>{if(b.user?.token){c({type:"SET_LOADING",payload:!0});try{let[,a,b]=await Promise.all([o(1),f.uN(20),f.hj()]);c({type:"HISTORY_LOADED",payload:a}),c({type:"USER_STATS_LOADED",payload:b})}catch(a){console.error("Failed to fetch initial data:",a),a instanceof f.lR&&(alert(a.message),n())}finally{c({type:"SET_LOADING",payload:!1})}}},[b.user?.token,n,o]),q=async a=>{if(!b.user)throw Error("User not logged in");c({type:"SET_LOADING",payload:!0});try{let b=await f.aC(a);a._id?c({type:"UPDATE_SET",payload:b}):await o(1);let d=await f.hj();return c({type:"USER_STATS_LOADED",payload:d}),b}catch(a){console.error("Failed to save set:",a),a instanceof f.lR?(alert(a.message),n()):alert(a.message)}finally{c({type:"SET_LOADING",payload:!1})}},r=async a=>{if(!b.user)throw Error("User not logged in");c({type:"SET_LOADING",payload:!0});try{await f.cc(a);let{vocabSets:d,setsPagination:e}=b,g=e?.currentPage||1;1===d.length&&g>1&&(g-=1),await o(g);let h=await f.hj();c({type:"USER_STATS_LOADED",payload:h})}catch(a){console.error("Failed to delete set:",a),a instanceof f.lR?(alert(a.message),n()):alert(a.message)}},s=async(a,d)=>{if(b.user)try{let{updatedUser:b,updatedSet:e}=await f.A9(a,d),g=await f.uN(20);c({type:"HISTORY_LOADED",payload:g}),c({type:"UPDATE_USER",payload:b}),e&&c({type:"UPDATE_SET",payload:e});let h=await f.hj();c({type:"USER_STATS_LOADED",payload:h});let i=localStorage.getItem(k)||sessionStorage.getItem(k);if(i){let a=localStorage.getItem(k)?localStorage:sessionStorage,c={...JSON.parse(i),...b};a.setItem(k,JSON.stringify(c))}}catch(a){console.error("Failed to save quiz result:",a),a instanceof f.lR&&(alert(a.message),n())}},t=async(a,d)=>{let e;if(!b.user)return;let g=b.vocabSets.find(b=>b._id===a);if(!g)return;let h=g.items.map(a=>a.id===d?e={...a,needsReview:!a.needsReview}:a);if(!e)return;let i={...g,items:h};try{c({type:"UPDATE_SET",payload:i}),await f.aC(i)}catch(a){console.error("Failed to update 'needs review' status:",a),c({type:"UPDATE_SET",payload:g}),a instanceof f.lR?(alert(a.message),n()):alert("Could not update item. Please try again.")}},u=async a=>{try{return await g.FQ(a)}catch(a){return a instanceof Error&&a.message===g.m7&&c({type:"REQUEST_USER_API_KEY",payload:!0}),null}},v=async(a,b)=>{c({type:"SET_LOADING",payload:!0});try{let c=await g.r(a,b);if(c)return c.map((a,b)=>({...a,id:`ai-${Date.now()}-${b}`}));return null}catch(a){return a instanceof Error&&a.message===g.m7&&c({type:"REQUEST_USER_API_KEY",payload:!0}),console.error("AI set generation failed in context:",a),null}finally{c({type:"SET_LOADING",payload:!1})}},w=(0,e.useCallback)(async(a,b="")=>{c({type:"SET_LOADING",payload:!0});try{let d=await f.rK(a,9,b);c({type:"PUBLIC_SETS_LOADED",payload:d})}catch(a){console.error("Failed to fetch public sets:",a),a instanceof f.lR?(alert(a.message),n()):alert(a.message),c({type:"SET_LOADING",payload:!1})}},[n]),x=async a=>{c({type:"SET_LOADING",payload:!0});try{let{newSet:b,updatedUser:d}=await f.QQ(a);await o(1),c({type:"UPDATE_USER",payload:d});let e=await f.hj();c({type:"USER_STATS_LOADED",payload:e});let g=localStorage.getItem(k)||sessionStorage.getItem(k);if(g){let a=localStorage.getItem(k)?localStorage:sessionStorage,b={...JSON.parse(g),...d};a.setItem(k,JSON.stringify(b))}return alert(`Set "${b.title}" has been added to your collection!`),b}catch(a){console.error("Failed to clone set:",a),a instanceof f.lR?(alert(a.message),n()):alert(a.message)}finally{c({type:"SET_LOADING",payload:!1})}},y=async()=>{if(b.user){c({type:"SET_LOADING",payload:!0});try{let a=await f.uN();c({type:"PROFILE_HISTORY_LOADED",payload:a})}catch(a){console.error("Failed to fetch full history:",a),a instanceof f.lR&&(alert(a.message),n())}}},z=async a=>{if(b.user){c({type:"SET_LOADING",payload:!0});try{let b=await f.eg(a);(localStorage.getItem(k)?localStorage:sessionStorage).setItem(k,JSON.stringify(b)),c({type:"LOGIN",payload:b}),alert("Profile updated successfully!")}catch(a){console.error("Failed to update profile:",a),alert(a.message),c({type:"SET_LOADING",payload:!1})}}},A=(0,e.useCallback)(async()=>{c({type:"SET_LOADING",payload:!0});try{let a=await f.Ee();c({type:"LEADERBOARD_LOADED",payload:a})}catch(a){console.error("Failed to fetch leaderboard:",a),a instanceof f.lR?(alert(a.message),n()):alert("Could not load the leaderboard.")}finally{c({type:"SET_LOADING",payload:!1})}},[n]),B=(0,e.useCallback)(async()=>{if(b.user?.role==="admin"){c({type:"SET_LOADING",payload:!0});try{let a=await f.dE();c({type:"ADMIN_STATS_LOADED",payload:a})}catch(a){console.error("Failed to fetch admin stats:",a),alert("Could not load admin statistics.")}}},[b.user?.role]),C=(0,e.useCallback)(async a=>{if(b.user?.role==="admin"){c({type:"SET_LOADING",payload:!0});try{let b=await f.b0(a,10);c({type:"ADMIN_USERS_LOADED",payload:b})}catch(a){console.error("Failed to fetch admin users:",a),alert("Could not load user list.")}}},[b.user?.role]),D=(0,e.useCallback)(async a=>{if(b.user?.role==="admin"){c({type:"SET_LOADING",payload:!0});try{await f.A3(a),await C(b.adminUsersPagination?.currentPage||1),alert("User deleted successfully.")}catch(a){console.error("Failed to delete user:",a),alert(a.message)}}},[b.user?.role,C,b.adminUsersPagination?.currentPage]);return(0,e.useEffect)(()=>{b.user&&p()},[b.user?.token]),(0,d.jsx)(j.Provider,{value:{state:b,login:l,register:m,logout:n,fetchSets:o,saveSet:q,deleteSet:r,saveQuizResult:s,toggleNeedsReview:t,generateSetWithAI:v,generateExample:u,fetchPublicSets:w,cloneSet:x,closeApiKeyModal:()=>c({type:"REQUEST_USER_API_KEY",payload:!1}),fetchProfileHistory:y,updateUserProfile:z,fetchLeaderboard:A,fetchAdminStats:B,fetchAdminUsers:C,adminDeleteUser:D},children:a})}},74725:(a,b,c)=>{"use strict";c.d(b,{AppProvider:()=>e});var d=c(97954);(0,d.registerClientReference)(function(){throw Error("Attempted to call AppContext() from the server but AppContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/huynhhuunghia/Documents/IT/hanziflow/frontend/context/AppContext.tsx","AppContext");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AppProvider() from the server but AppProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/huynhhuunghia/Documents/IT/hanziflow/frontend/context/AppContext.tsx","AppProvider")},77243:(a,b,c)=>{"use strict";c.d(b,{A3:()=>w,A9:()=>o,DY:()=>h,Ee:()=>t,KP:()=>x,Lx:()=>g,QQ:()=>s,Qj:()=>r,Re:()=>k,Uy:()=>j,aC:()=>l,b0:()=>v,cc:()=>m,dE:()=>u,eg:()=>i,hj:()=>p,lR:()=>e,rK:()=>q,uN:()=>n});let d="http://localhost:5001/api";class e extends Error{constructor(a){super(a),this.name="AuthError"}}let f=async(a,b={})=>{let c={"Content-Type":"application/json",...b.headers||{}},d=await fetch(a,{...b,headers:c});if(401===d.status)throw new e("Your session has expired. Please log in again.");if(403===d.status)throw new e("You are not authorized to perform this action.");if(!d.ok)throw Error((await d.json().catch(()=>({message:`Request failed with status ${d.status}`}))).message||"An unknown API error occurred.");if(204!==d.status)return d.json()},g=async(a,b)=>{let c=await fetch(`${d}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:b})});if(!c.ok)throw Error((await c.json()).message||"Login failed");return await c.json()},h=async(a,b,c)=>{let e=await fetch(`${d}/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:b,password:c})});if(!e.ok)throw Error((await e.json()).message||"Registration failed");return await e.json()},i=async a=>f(`${d}/users/profile`,{method:"PUT",body:JSON.stringify(a)}),j=async(a,b)=>f(`${d}/sets?page=${a}&limit=${b}`),k=async a=>f(`${d}/sets/${a}`),l=async a=>{let b=!!a._id;return f(b?`${d}/sets/${a._id}`:`${d}/sets`,{method:b?"PUT":"POST",body:JSON.stringify(a)})},m=async a=>f(`${d}/sets/${a}`,{method:"DELETE"}),n=async a=>f(a?`${d}/history?limit=${a}`:`${d}/history`),o=async(a,b)=>f(`${d}/history`,{method:"POST",body:JSON.stringify({vocabSet:a,score:b.score,total:b.total,questions:b.questions})}),p=async()=>f(`${d}/history/stats`),q=async(a,b,c)=>{let e=new URLSearchParams({page:String(a),limit:String(b)});return c&&e.append("search",c),f(`${d}/sets/community?${e.toString()}`)},r=async a=>f(`${d}/sets/community/${a}`),s=async a=>f(`${d}/sets/clone/${a}`,{method:"POST"}),t=async()=>f(`${d}/users/leaderboard`),u=async()=>f(`${d}/admin/stats`),v=async(a,b)=>f(`${d}/admin/users?page=${a}&limit=${b}`),w=async a=>f(`${d}/admin/users/${a}`,{method:"DELETE"}),x=async()=>f(`${d}/admin/export/users`)},81613:(a,b,c)=>{Promise.resolve().then(c.bind(c,52827))},82704:()=>{},93236:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))}};