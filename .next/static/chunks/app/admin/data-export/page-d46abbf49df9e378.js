(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{17237:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(95155);s(12115);let o=()=>(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"})},32383:()=>{},34267:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var a=s(95155);s(12115);let o=e=>{let{children:t,size:s=24,className:o="",...n}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,...n,children:t})}},37621:(e,t,s)=>{"use strict";s.d(t,{A3:()=>N,A9:()=>u,DY:()=>c,Ee:()=>j,KP:()=>S,Lx:()=>r,QQ:()=>g,Qj:()=>y,Re:()=>d,Uy:()=>l,aC:()=>h,b0:()=>w,cc:()=>x,dE:()=>b,eg:()=>i,hj:()=>p,lR:()=>o,rK:()=>f,uN:()=>m});let a="http://localhost:5001/api";class o extends Error{constructor(e){super(e),this.name="AuthError"}}let n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(()=>{let e=localStorage.getItem("hanziflow_user")||sessionStorage.getItem("hanziflow_user");if(e)try{return JSON.parse(e).token||null}catch(e){}return null})(),a={"Content-Type":"application/json",...t.headers||{}};s&&(a.Authorization="Bearer ".concat(s));let n=await fetch(e,{...t,headers:a});if(401===n.status)throw new o("Your session has expired. Please log in again.");if(403===n.status)throw new o("You are not authorized to perform this action.");if(!n.ok)throw Error((await n.json().catch(()=>({message:"Request failed with status ".concat(n.status)}))).message||"An unknown API error occurred.");if(204!==n.status)return n.json()},r=async(e,t)=>{let s=await fetch("".concat(a,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error((await s.json()).message||"Login failed");return await s.json()},c=async(e,t,s)=>{let o=await fetch("".concat(a,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s})});if(!o.ok)throw Error((await o.json()).message||"Registration failed");return await o.json()},i=async e=>n("".concat(a,"/users/profile"),{method:"PUT",body:JSON.stringify(e)}),l=async(e,t)=>n("".concat(a,"/sets?page=").concat(e,"&limit=").concat(t)),d=async e=>n("".concat(a,"/sets/").concat(e)),h=async e=>{let t=!!e._id;return n(t?"".concat(a,"/sets/").concat(e._id):"".concat(a,"/sets"),{method:t?"PUT":"POST",body:JSON.stringify(e)})},x=async e=>n("".concat(a,"/sets/").concat(e),{method:"DELETE"}),m=async e=>n(e?"".concat(a,"/history?limit=").concat(e):"".concat(a,"/history")),u=async(e,t)=>n("".concat(a,"/history"),{method:"POST",body:JSON.stringify({vocabSet:e,score:t.score,total:t.total,questions:t.questions})}),p=async()=>n("".concat(a,"/history/stats")),f=async(e,t,s)=>{let o=new URLSearchParams({page:String(e),limit:String(t)});return s&&o.append("search",s),n("".concat(a,"/sets/community?").concat(o.toString()))},y=async e=>n("".concat(a,"/sets/community/").concat(e)),g=async e=>n("".concat(a,"/sets/clone/").concat(e),{method:"POST"}),j=async()=>n("".concat(a,"/users/leaderboard")),b=async()=>n("".concat(a,"/admin/stats")),w=async(e,t)=>n("".concat(a,"/admin/users?page=").concat(e,"&limit=").concat(t)),N=async e=>n("".concat(a,"/admin/users/").concat(e),{method:"DELETE"}),S=async()=>n("".concat(a,"/admin/export/users"))},43973:(e,t,s)=>{"use strict";s.d(t,{V:()=>n});var a=s(95155);s(12115);var o=s(34267);let n=e=>(0,a.jsxs)(o.z,{...e,children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),(0,a.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})},45535:(e,t,s)=>{Promise.resolve().then(s.bind(s,85266))},59364:(e,t,s)=>{"use strict";s.d(t,{s:()=>n});var a=s(95155);s(12115);var o=s(34267);let n=e=>(0,a.jsxs)(o.z,{...e,children:[(0,a.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,a.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,a.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})},83686:()=>{},85266:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(95155),o=s(12115),n=s(4246),r=s(37621),c=s(17237),i=s(59364),l=s(43973);let d=()=>{let[e,t]=(0,o.useState)(!1),[s,d]=(0,o.useState)(null),h=async e=>{t(!0),d(null);try{let t=await (0,r.KP)();if("json"===e){let e="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t,null,2))),s=document.createElement("a");s.href=e,s.download="hanziflow_users_export.json",s.click()}else if("excel"===e){let e=n.Wp.json_to_sheet(t),s=n.Wp.book_new();n.Wp.book_append_sheet(s,e,"Users"),n._h(s,"hanziflow_users_export.xlsx")}}catch(e){d("Failed to export data. Please try again."),console.error(e)}finally{t(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Data Export & Backup"}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"User Data Export"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2 mb-6",children:"Download a complete copy of all user data. This is useful for backups, migrations, or external analysis."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("button",{onClick:()=>h("json"),disabled:e,className:"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md disabled:bg-blue-300 transition-colors",children:e?(0,a.jsx)(c.A,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.s,{size:20})," Export as JSON"]})}),(0,a.jsx)("button",{onClick:()=>h("excel"),disabled:e,className:"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md disabled:bg-green-300 transition-colors",children:e?(0,a.jsx)(c.A,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.s,{size:20})," Export as Excel"]})})]}),s&&(0,a.jsx)("p",{className:"text-red-500 mt-4 text-center",children:s})]}),(0,a.jsx)("div",{className:"mt-8 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(l.V,{className:"h-5 w-5 text-yellow-400"})}),(0,a.jsxs)("div",{className:"ml-3 space-y-2",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-yellow-800",children:"About Export Formats"}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,a.jsx)("strong",{className:"font-semibold",children:"JSON (Recommended for Backup):"})," This format contains the complete, raw data structure from the database. It's the best option for creating a full backup that can be restored or migrated to another MongoDB database."]}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,a.jsx)("strong",{className:"font-semibold",children:"Excel:"})," This format is best for viewing, sorting, and analyzing user data in spreadsheet software."]}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,a.jsx)("strong",{className:"font-semibold",children:"SQL Export:"})," A direct SQL export is not provided because this application uses a NoSQL (MongoDB) database. Converting NoSQL documents to a relational SQL format is a complex process that requires a custom script and a predefined SQL schema."]})]})]})})]})};function h(){return(0,a.jsx)(d,{})}}},e=>{e.O(0,[524,441,255,358],()=>e(e.s=45535)),_N_E=e.O()}]);