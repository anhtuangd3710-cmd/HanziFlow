(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{17237:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(95155);s(12115);let l=()=>(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"})},20063:(e,t,s)=>{"use strict";var r=s(47260);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},32288:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(95155),l=s(12115),n=s(17237),a=s(20063),i=s(43853),o=s(12083),d=s(37621),c=s(41618),u=s(92540),x=s(34267);let h=e=>(0,r.jsxs)(x.z,{...e,children:[(0,r.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,r.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]}),m=e=>(0,r.jsxs)(x.z,{...e,children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,r.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),f=()=>{let{setId:e}=(0,a.useParams)(),t=(0,a.useRouter)(),s=(0,a.useSearchParams)(),x=(0,l.useContext)(i.B),{studyMode:f}={studyMode:s.get("studyMode")||"all"},[g,p]=(0,l.useState)(void 0),[v,b]=(0,l.useState)(!0),[j,w]=(0,l.useState)(!1),[y,N]=(0,l.useState)(0),[k,S]=(0,l.useState)(!1),[C,P]=(0,l.useState)([]);if(!x)return(0,r.jsx)("div",{children:"Loading..."});let{state:R,saveSet:z}=x,M=(0,l.useMemo)(()=>R.vocabSets.find(t=>t._id===e),[R.vocabSets,e]);(0,l.useEffect)(()=>{if(M){p(M),b(!1);return}(async()=>{if(!e){p(null),b(!1);return}b(!0);try{let t=await (0,d.Re)(e);p(t)}catch(e){console.error("Failed to fetch study set:",e),p(null)}finally{b(!1)}})()},[e,M]),(0,l.useEffect)(()=>{g&&(P([..."review"===f?g.items.filter(e=>e.needsReview):g.items].sort(()=>Math.random()-.5)),N(0),S(!1))},[g,f]);let A=(0,l.useCallback)(async(e,t)=>{if(!g||e.needsReview===t)return;w(!0);let s=g.items.map(s=>s.id===e.id?{...s,needsReview:t}:s),r={...g,items:s};p(r),await z(r),w(!1)},[g,z]),E=e=>{L&&(A(L,!e),S(!1),setTimeout(()=>{N(e=>e+1)},150))};(0,l.useEffect)(()=>{let e=e=>{0!==C.length&&!(y>=C.length)&&("Space"===e.code&&(e.preventDefault(),S(e=>!e)),k&&("ArrowLeft"===e.code&&E(!1),"ArrowRight"===e.code&&E(!0)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[k,C,y]);let L=C[y];if(v)return(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsx)(n.A,{})});if(!g)return(0,r.jsxs)("div",{children:["Set not found. ",(0,r.jsx)("button",{onClick:()=>t.push("/"),children:"Go back."})]});if(0===C.length)return(0,r.jsxs)("div",{className:"text-center p-8 bg-white rounded-lg shadow-md max-w-lg mx-auto",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:"No Words to Study"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"review"===f?"You have no words marked for review in this set.":"This set is currently empty."}),(0,r.jsx)("button",{onClick:()=>t.push("/"),className:"mt-6 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Dashboard"})]});if(y>=C.length)return(0,r.jsxs)("div",{className:"text-center p-8 bg-white rounded-lg shadow-md max-w-lg mx-auto",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-green-600",children:"Session Complete!"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"You've reviewed all the words for this session."}),(0,r.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>t.push("/"),className:"py-2 px-6 bg-gray-200 text-gray-800 font-bold rounded-lg hover:bg-gray-300",children:"Finish"}),(0,r.jsx)("button",{onClick:()=>{N(0),P([...C].sort(()=>Math.random()-.5))},className:"py-2 px-6 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700",children:"Study Again"})]})]});let _=y/C.length*100;return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"w-full mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-baseline mb-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-700",children:g.title}),(0,r.jsxs)("p",{className:"text-lg text-gray-500",children:[y+1," / ",C.length]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:"".concat(_,"%")}})})]}),(0,r.jsx)("div",{className:"w-full h-80 perspective-1000",children:(0,r.jsxs)("div",{className:"relative w-full h-full transform-style-3d transition-transform duration-500 ".concat(k?"rotate-y-180":""),onClick:()=>S(!k),children:[(0,r.jsxs)("div",{className:"absolute w-full h-full backface-hidden bg-white rounded-lg shadow-xl flex flex-col items-center justify-center p-6 cursor-pointer",children:[(0,r.jsx)("button",{onClick:e=>{var t;return t=L.hanzi,void(e.stopPropagation(),(0,o.AU)(t))},className:"absolute top-4 right-4 p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Play pronunciation",children:(0,r.jsx)(c.c,{size:28})}),j&&(0,r.jsx)("div",{className:"absolute top-4 left-4",children:(0,r.jsx)(n.A,{})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),A(L,!L.needsReview)},className:"absolute bottom-4 right-4 p-2 rounded-full transition-colors ".concat((null==L?void 0:L.needsReview)?"text-yellow-400 hover:text-yellow-300":"text-gray-400 hover:text-gray-600"),"aria-label":"Mark for review",title:(null==L?void 0:L.needsReview)?"Unmark from review":"Mark for review",children:(0,r.jsx)(u.G,{size:28,filled:!!(null==L?void 0:L.needsReview)})}),(0,r.jsx)("p",{className:"text-6xl font-semibold",children:L.hanzi}),(0,r.jsx)("p",{className:"text-2xl text-gray-500 mt-4",children:L.pinyin})]}),(0,r.jsx)("div",{className:"absolute w-full h-full backface-hidden bg-blue-500 text-white rounded-lg shadow-xl flex flex-col items-center justify-center p-6 cursor-pointer rotate-y-180",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-4xl font-bold",children:L.meaning}),L.exampleSentence&&(0,r.jsx)("p",{className:"text-lg mt-4 opacity-90 italic whitespace-pre-wrap",children:L.exampleSentence})]})})]})}),k?(0,r.jsxs)("div",{className:"mt-8 flex w-full justify-center gap-4",children:[(0,r.jsxs)("button",{onClick:()=>E(!1),className:"w-48 flex items-center justify-center gap-2 py-3 px-6 bg-red-500 text-white font-bold rounded-lg shadow-md hover:bg-red-600 transition-colors",children:[(0,r.jsx)(m,{size:20}),"Need to Review"]}),(0,r.jsxs)("button",{onClick:()=>E(!0),className:"w-48 flex items-center justify-center gap-2 py-3 px-6 bg-green-500 text-white font-bold rounded-lg shadow-md hover:bg-green-600 transition-colors",children:[(0,r.jsx)(h,{size:20}),"Got It Right"]})]}):(0,r.jsx)("div",{className:"mt-8 flex w-full justify-center",children:(0,r.jsx)("button",{onClick:()=>S(!0),className:"w-full max-w-xs py-3 px-6 bg-gray-200 text-gray-800 font-bold rounded-lg hover:bg-gray-300",children:"Show Answer"})}),(0,r.jsx)("button",{onClick:()=>t.push("/"),className:"mt-8 text-gray-600 hover:text-gray-800 font-semibold",children:"â† Back to Dashboard"}),(0,r.jsx)("style",{children:"\n            .perspective-1000 { perspective: 1000px; }\n            .transform-style-3d { transform-style: preserve-3d; }\n            .rotate-y-180 { transform: rotateY(180deg); }\n            .backface-hidden { backface-visibility: hidden; }\n        "})]})};function g(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading page..."})]}),children:(0,r.jsx)(f,{})})}},34267:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var r=s(95155);s(12115);let l=e=>{let{children:t,size:s=24,className:l="",...n}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:l,...n,children:t})}},41618:(e,t,s)=>{"use strict";s.d(t,{c:()=>n});var r=s(95155);s(12115);var l=s(34267);let n=e=>(0,r.jsxs)(l.z,{...e,children:[(0,r.jsx)("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),(0,r.jsx)("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),(0,r.jsx)("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]})},55939:(e,t,s)=>{Promise.resolve().then(s.bind(s,32288))},92540:(e,t,s)=>{"use strict";s.d(t,{G:()=>n});var r=s(95155);s(12115);var l=s(34267);let n=e=>{let{filled:t,...s}=e;return(0,r.jsx)(l.z,{...s,children:(0,r.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",fill:t?"currentColor":"none"})})}}},e=>{e.O(0,[798,853,441,255,358],()=>e(e.s=55939)),_N_E=e.O()}]);